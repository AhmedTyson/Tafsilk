@model TafsilkPlatform.MVC.Models.Order
@{
    ViewData["Title"] = "تفاصيل الطلب";
}

<div class="container mt-4">
    <nav aria-label="breadcrumb">
   <ol class="breadcrumb">
  <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">الرئيسية</a></li>
   <li class="breadcrumb-item"><a asp-action="Index">الطلبات</a></li>
   <li class="breadcrumb-item active">تفاصيل الطلب</li>
  </ol>
    </nav>

    <h1 class="mb-4">تفاصيل الطلب</h1>

    <div class="row">
   <div class="col-md-8">
   <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white">
    <h4 class="mb-0">معلومات الطلب</h4>
      </div>
      <div class="card-body">
      <div class="row mb-3">
     <div class="col-md-6">
        <p><strong>رقم الطلب:</strong></p>
    <p class="text-muted"><code>@Model.Id</code></p>
    </div>
     <div class="col-md-6">
    <p><strong>الحالة:</strong></p>
     @{
      var statusClass = Model.Status switch
      {
  "مكتمل" => "success",
      "قيد التنفيذ" => "warning",
      "جديد" => "info",
  _ => "secondary"
  };
    }
       <p><span class="badge bg-@statusClass fs-6">@Model.Status</span></p>
 </div>
   </div>

     <hr />

    <div class="row mb-3">
      <div class="col-md-6">
        <p><strong>العميل:</strong></p>
     <p class="text-muted">@Model.CustomerName</p>
   </div>
      <div class="col-md-6">
     <p><strong>الخياط:</strong></p>
     <p class="text-muted">@Model.TailorName</p>
   </div>
     </div>

   <hr />

    <div class="row mb-3">
       <div class="col-md-12">
      <p><strong>الخدمة:</strong></p>
    <p class="text-muted">@Model.ServiceName</p>
    </div>
  </div>

     <hr />

     <div class="row mb-3">
     <div class="col-md-6">
       <p><strong>تاريخ الطلب:</strong></p>
   <p class="text-muted">
     <i class="bi bi-calendar"></i> @Model.OrderDate.ToString("dd/MM/yyyy")
   </p>
      </div>
       <div class="col-md-6">
      <p><strong>تاريخ التسليم المتوقع:</strong></p>
      <p class="text-muted">
    <i class="bi bi-calendar-check"></i> 
     @(Model.DeliveryDate?.ToString("dd/MM/yyyy") ?? "غير محدد")
       </p>
      </div>
    </div>
       </div>
  </div>
 </div>

 <div class="col-md-4">
   <div class="card shadow-sm mb-4">
<div class="card-header bg-success text-white">
       <h5 class="mb-0">ملخص المدفوعات</h5>
       </div>
  <div class="card-body">
     <div class="d-flex justify-content-between mb-2">
       <span>سعر الخدمة:</span>
     <span>@Model.TotalPrice.ToString("N0") جنيه</span>
  </div>
   <div class="d-flex justify-content-between mb-2">
      <span>رسوم المنصة:</span>
       <span>0 جنيه</span>
   </div>
       <hr />
     <div class="d-flex justify-content-between">
      <strong>الإجمالي:</strong>
      <strong class="text-success fs-5">@Model.TotalPrice.ToString("N0") جنيه</strong>
      </div>
      </div>
   </div>

      <div class="card shadow-sm">
       <div class="card-header bg-info text-white">
    <h5 class="mb-0">الإجراءات</h5>
       </div>
   <div class="card-body d-grid gap-2">
      <button class="btn btn-primary">
   <i class="bi bi-chat-dots"></i> تواصل مع الخياط
      </button>
     <button class="btn btn-warning">
       <i class="bi bi-exclamation-triangle"></i> إبلاغ عن مشكلة
    </button>
    @if (Model.Status == "مكتمل")
    {
       <button class="btn btn-success">
    <i class="bi bi-star"></i> تقييم الخدمة
       </button>
   }
      </div>
   </div>
 </div>
    </div>
</div>
