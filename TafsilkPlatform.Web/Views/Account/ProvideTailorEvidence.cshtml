@model TafsilkPlatform.Web.ViewModels.CompleteTailorProfileRequest
@{
    ViewData["Title"] = "تفصيلك — تقديم الأوراق الثبوتية";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Meta {
    <meta name="description" content="تقديم الأوراق الثبوتية لتفعيل حساب الخياط في منصة تفصيلك" />
    <meta name="robots" content="noindex, nofollow" />
}

@section Styles {
    <style>
    :root {
   --primary-color: #2c5aa0;
          --primary-hover: #1e3f73;
    --primary-light: #e3f2fd;
      --secondary-color: #f39c12;
            --secondary-hover: #e67e22;
       --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --text-light: #bdc3c7;
       --text-white: #ffffff;
            --background-white: #ffffff;
   --background-gray: #f8f9fa;
            --background-light: #ecf0f1;
   --border-color: #e1e8ed;
       --dark: #0f172a;

            --font-family: "Cairo", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
 font-family: var(--font-family);
      line-height: 1.6;
         color: var(--text-primary);
  background-color: var(--background-gray);
            direction: rtl;
            text-align: right;
        }

        .container {
            max-width: 900px;
margin: 0 auto;
        padding: 2rem 1rem;
        }

        .page-header {
 text-align: center;
          margin-bottom: 2rem;
       background: linear-gradient(135deg, var(--primary-color) 0%, #1e3f73 100%);
    color: white;
      padding: 2rem;
            border-radius: 1rem;
}

        .page-title {
        font-size: 2rem;
     font-weight: 700;
 margin-bottom: 0.5rem;
        }

    .page-subtitle {
      font-size: 1.1rem;
            opacity: 0.9;
      }

        .evidence-card {
  background-color: var(--background-white);
          border-radius: 0.75rem;
            padding: 2rem;
       box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            margin-bottom: 2rem;
        }

        .alert {
    padding: 1rem;
        margin-bottom: 1.5rem;
   border-radius: 0.5rem;
            border-left: 4px solid;
   }

     .alert-info {
            background-color: #d1ecf1;
  border-color: #0c5460;
            color: #0c5460;
        }

      .alert-warning {
   background-color: #fff3cd;
            border-color: #856404;
            color: #856404;
        }

        .alert-danger {
         background-color: #f8d7da;
            border-color: #721c24;
            color: #721c24;
  }

        .verification-requirements {
       background-color: var(--background-light);
            border-radius: 0.75rem;
   padding: 1.5rem;
      margin-bottom: 2rem;
        }

 .verification-requirements h3 {
          font-size: 1.25rem;
            font-weight: 700;
      margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .requirements-list {
    list-style: none;
   padding: 0;
   }

        .requirements-list li {
          padding: 0.75rem 0;
        border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: start;
            gap: 0.75rem;
   }

     .requirements-list li:last-child {
      border-bottom: none;
        }

        .requirement-icon {
  color: var(--primary-color);
            font-size: 1.25rem;
            margin-top: 0.25rem;
        }

        .requirement-text {
       flex: 1;
        }

        .requirement-text strong {
            display: block;
 margin-bottom: 0.25rem;
        }

        .requirement-text small {
         color: var(--text-secondary);
        font-size: 0.9rem;
   }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
          display: block;
margin-bottom: 0.5rem;
   font-weight: 600;
     color: var(--text-primary);
        }

    .form-label .required {
    color: var(--error-color);
        }

        .form-control {
            width: 100%;
     padding: 0.75rem;
            border: 1px solid var(--border-color);
     border-radius: 0.5rem;
            font-family: var(--font-family);
         transition: border-color 0.3s;
        }

        .form-control:focus {
       outline: none;
          border-color: var(--primary-color);
     box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
 }

   .upload-area {
border: 2px dashed var(--border-color);
 border-radius: 0.75rem;
            padding: 2rem;
  text-align: center;
         cursor: pointer;
      transition: all 0.3s;
         background-color: var(--background-gray);
        }

      .upload-area:hover {
    border-color: var(--primary-color);
       background-color: var(--primary-light);
 }

        .upload-icon {
            font-size: 3rem;
        color: var(--text-secondary);
      margin-bottom: 1rem;
        }

        .upload-btn {
       display: inline-block;
   padding: 0.75rem 1.5rem;
   background-color: var(--primary-color);
 color: white;
  border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
            border: none;
        }

        .upload-btn:hover {
background-color: var(--primary-hover);
        }

        .btn {
 display: inline-block;
            padding: 0.75rem 1.5rem;
      border: none;
            border-radius: 0.5rem;
   font-family: var(--font-family);
            font-size: 1rem;
          font-weight: 600;
  text-align: center;
       cursor: pointer;
      transition: all 0.3s;
       text-decoration: none;
        }

 .btn-primary {
            background-color: var(--primary-color);
            color: white;
   }

        .btn-primary:hover {
         background-color: var(--primary-hover);
      transform: translateY(-2px);
       box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

      .btn-success {
    background-color: var(--success-color);
        color: white;
        }

        .btn-success:hover {
          background-color: #229954;
        }

        .btn-large {
       padding: 1rem 2rem;
            font-size: 1.1rem;
  }

.form-navigation {
  display: flex;
            justify-content: center;
     margin-top: 2rem;
        }

        .text-danger {
            color: var(--error-color);
          font-size: 0.9rem;
 margin-top: 0.25rem;
        }

   .info-box {
            background-color: #e3f2fd;
      border-left: 4px solid var(--primary-color);
      padding: 1rem;
    border-radius: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .info-box strong {
            display: block;
 margin-bottom: 0.5rem;
color: var(--primary-color);
        }
    </style>
}

<!-- Evidence Submission Page -->
<main class="evidence-page">
    <div class="container">
        <div class="page-header">
 <h1 class="page-title">تقديم الأوراق الثبوتية</h1>
        <p class="page-subtitle">يرجى تقديم المستندات المطلوبة لإكمال عملية التسجيل كخياط</p>
</div>

        @if (!ViewData.ModelState.IsValid)
        {
    <div class="alert alert-danger" role="alert">
            <strong>حدث خطأ!</strong>
     @Html.ValidationSummary(false, "", new { @class = "text-danger" })
        </div>
        }

        @if (TempData["InfoMessage"] != null)
     {
  <div class="alert alert-info" role="alert">
      <strong><i class="fas fa-info-circle"></i> @TempData["InfoMessage"]</strong>
            </div>
        }

        <div class="info-box">
    <strong><i class="fas fa-shield-check"></i> عملية التحقق الإلزامية</strong>
     <p>لضمان مصداقية وأمان المنصة، يجب على جميع الخياطين تقديم الأوراق الثبوتية قبل البدء في استخدام الحساب.</p>
         <p>سيتم مراجعة طلبك من قبل فريقنا خلال 24-48 ساعة عمل.</p>
        </div>

 <div class="evidence-card">
            <div class="verification-requirements">
              <h3><i class="fas fa-clipboard-list"></i> المستندات المطلوبة</h3>
                <ul class="requirements-list">
          <li>
            <span class="requirement-icon"><i class="fas fa-id-card"></i></span>
     <div class="requirement-text">
<strong>صورة الهوية الشخصية (إلزامي)</strong>
<small>صورة واضحة للهوية الوطنية أو جواز السفر</small>
      </div>
          </li>
            <li>
      <span class="requirement-icon"><i class="fas fa-images"></i></span>
         <div class="requirement-text">
<strong>صور من أعمالك السابقة (إلزامي - 3 صور على الأقل)</strong>
         <small>صور توضح جودة عملك وخبرتك في مجال الخياطة</small>
 </div>
    </li>
            <li>
          <span class="requirement-icon"><i class="fas fa-certificate"></i></span>
             <div class="requirement-text">
    <strong>وثائق إضافية (اختياري)</strong>
        <small>سجل تجاري، شهادات خبرة، أو أي مستندات داعمة أخرى</small>
       </div>
      </li>
  </ul>
 </div>

     <form asp-action="ProvideTailorEvidence" asp-controller="Account" method="post" enctype="multipart/form-data">
                @Html.AntiForgeryToken()
      <input type="hidden" asp-for="UserId" />
    <input type="hidden" asp-for="Email" />
      <input type="hidden" asp-for="FullName" />

          <div class="form-group">
         <label class="form-label">الاسم الكامل</label>
       <input type="text" class="form-control" value="@Model?.FullName" readonly />
                </div>

           <div class="form-group">
 <label class="form-label">البريد الإلكتروني</label>
               <input type="email" class="form-control" value="@Model?.Email" readonly />
</div>

            <div class="form-group">
    <label asp-for="WorkshopName" class="form-label">اسم الورشة <span class="required">*</span></label>
                <input asp-for="WorkshopName" class="form-control" required />
        <span asp-validation-for="WorkshopName" class="text-danger"></span>
     </div>

      <div class="form-group">
   <label asp-for="PhoneNumber" class="form-label">رقم الهاتف <span class="required">*</span></label>
         <input asp-for="PhoneNumber" class="form-control" required />
     <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>

            <div class="form-group">
    <label asp-for="City" class="form-label">المدينة <span class="required">*</span></label>
        <input asp-for="City" class="form-control" required />
    <span asp-validation-for="City" class="text-danger"></span>
      </div>

        <div class="form-group">
<label asp-for="Address" class="form-label">عنوان الورشة <span class="required">*</span></label>
         <textarea asp-for="Address" class="form-control" rows="3" required></textarea>
 <span asp-validation-for="Address" class="text-danger"></span>
        </div>

                <div class="form-group">
          <label asp-for="Description" class="form-label">وصف الورشة والخدمات <span class="required">*</span></label>
     <textarea asp-for="Description" class="form-control" rows="4" required></textarea>
    <span asp-validation-for="Description" class="text-danger"></span>
        </div>

     <div class="form-group">
       <label asp-for="ExperienceYears" class="form-label">سنوات الخبرة (اختياري)</label>
          <input asp-for="ExperienceYears" type="number" class="form-control" min="0" max="100" />
  <span asp-validation-for="ExperienceYears" class="text-danger"></span>
 </div>

                <div class="form-group">
        <label asp-for="IdDocument" class="form-label">
  رفع صورة الهوية الشخصية <span class="required">*</span>
   </label>
      <div class="upload-area" onclick="document.getElementById('idUpload').click()">
            <div class="upload-icon">
  <i class="fas fa-cloud-upload-alt"></i>
      </div>
     <p>انقر أو اسحب الصورة هنا</p>
        <button type="button" class="upload-btn">
          <i class="fas fa-plus"></i> اختر الصورة
     </button>
          </div>
  <input asp-for="IdDocument" type="file" accept="image/*" id="idUpload" style="display: none;" required />
   <span asp-validation-for="IdDocument" class="text-danger"></span>
         </div>

     <div class="form-group">
                <label asp-for="PortfolioImages" class="form-label">
 رفع صور من أعمالك السابقة (3 صور على الأقل) <span class="required">*</span>
  </label>
        <div class="upload-area" onclick="document.getElementById('portfolioUpload').click()">
                <div class="upload-icon">
      <i class="fas fa-images"></i>
 </div>
  <p>انقر أو اسحب الصور هنا (يمكنك اختيار عدة صور)</p>
           <button type="button" class="upload-btn">
               <i class="fas fa-plus"></i> اختر الصور
   </button>
          </div>
       <input asp-for="PortfolioImages" type="file" accept="image/*" multiple id="portfolioUpload" style="display: none;" />
   <span asp-validation-for="PortfolioImages" class="text-danger"></span>
        </div>

            <div class="form-group">
   <label asp-for="AdditionalDocuments" class="form-label">وثائق إضافية (اختياري)</label>
<div class="upload-area" onclick="document.getElementById('docsUpload').click()">
           <div class="upload-icon">
                 <i class="fas fa-file-upload"></i>
     </div>
        <p>سجل تجاري، شهادات خبرة، أو أي مستندات داعمة</p>
           <button type="button" class="upload-btn">
        <i class="fas fa-plus"></i> اختر الملفات
             </button>
 </div>
      <input asp-for="AdditionalDocuments" type="file" accept=".pdf,.doc,.docx,image/*" multiple id="docsUpload" style="display: none;" />
       <span asp-validation-for="AdditionalDocuments" class="text-danger"></span>
          </div>

  <div class="form-group">
  <label style="display: flex; align-items: start; gap: 0.5rem;">
         <input asp-for="AgreeToTerms" type="checkbox" required style="margin-top: 0.25rem;" />
            <span>
            أوافق على <a href="@Url.Action("Privacy", "Home")" target="_blank">شروط الخدمة</a> 
        و <a href="@Url.Action("Privacy", "Home")" target="_blank">سياسة الخصوصية</a> وأقر بأن جميع المعلومات المقدمة صحيحة
       </span>
              </label>
           <span asp-validation-for="AgreeToTerms" class="text-danger"></span>
            </div>

            <div class="alert alert-warning">
      <i class="fas fa-exclamation-triangle"></i>
              <strong>تنبيه هام:</strong> سيتم مراجعة طلبك من قبل فريق الإدارة خلال 24-48 ساعة عمل. 
        سيتم إرسال إشعار لك عبر البريد الإلكتروني فور الموافقة على حسابك.
         </div>

   <div class="form-navigation">
        <button type="submit" class="btn btn-success btn-large">
         <i class="fas fa-check-circle"></i> تقديم الأوراق الثبوتية
            </button>
       </div>
 </form>
        </div>
    </div>
</main>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        // Simple file upload feedback
        document.getElementById('idUpload').addEventListener('change', function(e) {
  if (this.files.length > 0) {
       const fileName = this.files[0].name;
 const uploadArea = this.closest('.upload-area');
                uploadArea.style.borderColor = 'var(--success-color)';
   uploadArea.querySelector('p').textContent = `تم اختيار: ${fileName}`;
            }
        });

        document.getElementById('portfolioUpload').addEventListener('change', function(e) {
      if (this.files.length > 0) {
 const fileCount = this.files.length;
  const uploadArea = this.closest('.upload-area');
    uploadArea.style.borderColor = 'var(--success-color)';
    uploadArea.querySelector('p').textContent = `تم اختيار ${fileCount} صورة`;
    }
        });

    document.getElementById('docsUpload').addEventListener('change', function(e) {
       if (this.files.length > 0) {
        const fileCount = this.files.length;
         const uploadArea = this.closest('.upload-area');
      uploadArea.style.borderColor = 'var(--success-color)';
  uploadArea.querySelector('p').textContent = `تم اختيار ${fileCount} ملف`;
     }
        });
    </script>
}
