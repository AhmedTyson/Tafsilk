@model TafsilkPlatform.Web.ViewModels.Admin.TailorVerificationViewModel

@{
    ViewData["Title"] = "Tailor Verification";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid py-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
   <div>
    <h2 class="mb-1">
     <i class="fas fa-user-check text-primary me-2"></i>
 Tailor Verification
   </h2>
            <p class="text-muted mb-0">Review and verify tailor applications</p>
        </div>
        <div>
            <a href="@Url.Action("Index", "AdminDashboard")" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
            </a>
        </div>
    </div>

    <!-- Status Filter -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <form method="get" class="row g-3">
      <div class="col-md-4">
            <label for="statusFilter" class="form-label">Status</label>
             <select name="status" id="statusFilter" class="form-select" onchange="this.form.submit()">
              <option value="">Pending Only</option>
         <option value="Pending" selected="@(Model.SelectedStatus == "Pending")">Pending</option>
          <option value="Verified" selected="@(Model.SelectedStatus == "Verified")">Verified</option>
           </select>
                </div>
  <div class="col-md-8 d-flex align-items-end">
           <button type="submit" class="btn btn-primary">
        <i class="fas fa-filter me-2"></i>Filter
 </button>
      </div>
   </form>
        </div>
    </div>

    <!-- Tailors List -->
    @if (Model.Tailors == null || !Model.Tailors.Any())
 {
        <div class="alert alert-info">
<i class="fas fa-info-circle me-2"></i>
       No tailors found matching the selected criteria.
        </div>
    }
    else
    {
        <div class="row">
       @foreach (var tailor in Model.Tailors)
            {
          <div class="col-md-6 col-lg-4 mb-4">
       <div class="card h-100 shadow-sm hover-shadow">
 <div class="card-body">
             <!-- Tailor Info -->
          <div class="d-flex align-items-start mb-3">
            <div class="avatar-circle bg-primary text-white me-3">
         @tailor.FullName?.Substring(0, 1).ToUpper()
   </div>
       <div class="flex-grow-1">
      <h5 class="mb-1">@tailor.FullName</h5>
             <p class="text-muted small mb-0">@tailor.ShopName</p>
       <p class="text-muted small mb-0">
               <i class="fas fa-envelope me-1"></i>
    @tailor.User?.Email
         </p>
     </div>
     @if (tailor.IsVerified)
        {
     <span class="badge bg-success">
      <i class="fas fa-check-circle me-1"></i>Verified
        </span>
    }
   else
     {
            <span class="badge bg-warning text-dark">
               <i class="fas fa-clock me-1"></i>Pending
   </span>
   }
         </div>

      <!-- Details -->
        <div class="mb-3">
           <p class="mb-2">
          <i class="fas fa-map-marker-alt text-muted me-2"></i>
         <small>@tailor.City, @tailor.Address</small>
          </p>
   <p class="mb-2">
            <i class="fas fa-phone text-muted me-2"></i>
           <small>@(tailor.User?.PhoneNumber ?? "N/A")</small>
        </p>
             <p class="mb-2">
            <i class="fas fa-calendar text-muted me-2"></i>
       <small>Registered: @tailor.CreatedAt.ToString("MMM dd, yyyy")</small>
          </p>
   <p class="mb-0">
             <i class="fas fa-images text-muted me-2"></i>
     <small>Portfolio: @tailor.PortfolioImages?.Count() images</small>
      </p>
      </div>

       <!-- Actions -->
    <div class="d-grid gap-2">
                  <a href="@Url.Action("ReviewTailor", "AdminDashboard", new { id = tailor.Id })" 
           class="btn btn-primary btn-sm">
             <i class="fas fa-eye me-2"></i>Review Application
  </a>
        </div>
</div>
 </div>
        </div>
            }
   </div>

 <!-- Pagination -->
 @if (Model.TotalPages > 1)
  {
      <nav aria-label="Page navigation" class="mt-4">
<ul class="pagination justify-content-center">
         <li class="page-item @(Model.CurrentPage == 1 ? "disabled" : "")">
       <a class="page-link" href="@Url.Action("TailorVerification", new { status = Model.SelectedStatus, page = Model.CurrentPage - 1 })">
          Previous
         </a>
      </li>

        @for (int i = 1; i <= Model.TotalPages; i++)
          {
         <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
     <a class="page-link" href="@Url.Action("TailorVerification", new { status = Model.SelectedStatus, page = i })">
        @i
   </a>
 </li>
        }

     <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
    <a class="page-link" href="@Url.Action("TailorVerification", new { status = Model.SelectedStatus, page = Model.CurrentPage + 1 })">
     Next
      </a>
        </li>
   </ul>
         </nav>
        }
    }
</div>

@section Styles {
    <style>
        .avatar-circle {
       width: 50px;
            height: 50px;
  border-radius: 50%;
       display: flex;
 align-items: center;
            justify-content: center;
       font-size: 1.5rem;
            font-weight: bold;
      }

        .hover-shadow {
            transition: box-shadow 0.3s ease;
     }

        .hover-shadow:hover {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
        }

 .card {
 border-radius: 10px;
        }

        .badge {
         font-size: 0.75rem;
         padding: 0.35em 0.65em;
        }
    </style>
}

@section Scripts {
    <script>
        // Add any JavaScript functionality here
        console.log('Tailor Verification page loaded');
    </script>
}
