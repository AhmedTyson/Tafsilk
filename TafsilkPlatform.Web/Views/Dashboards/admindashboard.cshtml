@{
 Layout = null;
}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Tafsilk - Admin Dashboard</title>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
 <link rel="stylesheet" href="~/css/admin-dashboard.css" />
</head>
<body>
 @Html.AntiForgeryToken()

 <!-- Top Navigation Bar -->
 <header class="topbar">
 <div class="topbar-left">
 <button class="sidebar-toggle" id="sidebarToggle">
 <i class="fas fa-bars"></i>
 </button>
 <div class="breadcrumb">
 <span class="breadcrumb-item active">لوحة التحكم</span>
 </div>
 </div>
 <div class="topbar-right">
 <div class="notifications">
 <button class="notification-btn" id="notificationBtn">
 <i class="fas fa-bell"></i>
 <span class="notification-badge">5</span>
 </button>
 </div>
 <div class="user-menu">
 <div class="user-avatar">
 <img src="https://placehold.co/40x40/2c5aa0/ffffff?text=م" alt="المسؤول">
 </div>
 <span class="user-name">أحمد محمد</span>
 <i class="fas fa-chevron-down"></i>
 </div>
 </div>
 </header>

 <!-- Sidebar Navigation -->
 <aside class="sidebar" id="sidebar">
 <div class="sidebar-header">
 <div class="logo">
 <i class="fas fa-cut"></i>
 <span>تفصيلك</span>
 </div>
 </div>
 <nav class="sidebar-nav">
 <ul>
 <li class="nav-item active">
 <a href="#" data-page="dashboard">
 <i class="fas fa-home"></i>
 <span>لوحة التحكم</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="users">
 <i class="fas fa-users"></i>
 <span>إدارة المستخدمين</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="tailors">
 <i class="fas fa-user-secret"></i>
 <span>التحقق من الخياطين</span>
 <span class="badge">12</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="portfolio">
 <i class="fas fa-images"></i>
 <span>مراجعة الصور</span>
 <span class="badge">8</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="orders">
 <i class="fas fa-shopping-cart"></i>
 <span>الطلبات</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="disputes">
 <i class="fas fa-exclamation-triangle"></i>
 <span>حل النزاعات</span>
 <span class="badge">5</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="refunds">
 <i class="fas fa-money-bill-wave"></i>
 <span>طلبات الاسترداد</span>
 <span class="badge">3</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="reviews">
 <i class="fas fa-star"></i>
 <span>مراجعة التقييمات</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="content">
 <i class="fas fa-flag"></i>
 <span>مراقبة المحتوى</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="analytics">
 <i class="fas fa-chart-bar"></i>
 <span>التقارير والإحصائيات</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="notifications">
 <i class="fas fa-bell"></i>
 <span>مركز الإشعارات</span>
 </a>
 </li>
 <li class="nav-item">
 <a href="#" data-page="audit">
 <i class="fas fa-clipboard-list"></i>
 <span>سجلات التدقيق</span>
 </a>
 </li>
 </ul>
 </nav>
 </aside>

 <!-- Main Content Area -->
 <main class="main-content" id="mainContent">
 <!-- Dashboard Page -->
 <section id="dashboard" class="page active">
 <div class="page-header">
 <h1 class="page-title">لوحة التحكم</h1>
 <div class="page-actions">
 <button class="btn btn-primary" id="refreshData">
 <i class="fas fa-sync-alt"></i>
 تحديث البيانات
 </button>
 </div>
 </div>

 <!-- Stats Cards -->
 <div class="stats-grid">
 <div class="stat-card">
 <div class="stat-icon primary">
 <i class="fas fa-users"></i>
 </div>
 <div class="stat-content">
 <h3 class="stat-value">15,342</h3>
 <p class="stat-label">إجمالي المستخدمين</p>
 <div class="stat-trend up">
 <i class="fas fa-arrow-up"></i>
 <span>8% زيادة</span>
 </div>
 </div>
 </div>
 <div class="stat-card">
 <div class="stat-icon success">
 <i class="fas fa-user-check"></i>
 </div>
 <div class="stat-content">
 <h3 class="stat-value">423</h3>
 <p class="stat-label">الخياطون المعتمدون</p>
 <div class="stat-trend up">
 <i class="fas fa-arrow-up"></i>
 <span>12% زيادة</span>
 </div>
 </div>
 </div>
 <div class="stat-card">
 <div class="stat-icon warning">
 <i class="fas fa-shopping-cart"></i>
 </div>
 <div class="stat-content">
 <h3 class="stat-value">5,287</h3>
 <p class="stat-label">الطلبات هذا الشهر</p>
 <div class="stat-trend up">
 <i class="fas fa-arrow-up"></i>
 <span>15% زيادة</span>
 </div>
 </div>
 </div>
 <div class="stat-card">
 <div class="stat-icon secondary">
 <i class="fas fa-money-bill-wave"></i>
 </div>
 <div class="stat-content">
 <h3 class="stat-value">2,850,750 ج.م</h3>
 <p class="stat-label">الإيرادات هذا الشهر</p>
 <div class="stat-trend up">
 <i class="fas fa-arrow-up"></i>
 <span>22% زيادة</span>
 </div>
 </div>
 </div>
 </div>

 <!-- Recent Activity & Pending Actions -->
 <div class="content-grid">
 <div class="content-card">
 <div class="card-header">
 <h3>النشاط الحديث</h3>
 <button class="btn btn-text">عرض الكل</button>
 </div>
 <div class="card-body">
 <div class="activity-list" id="recentActivity">
 <!-- Activity items will be populated by JavaScript -->
 </div>
 </div>
 </div>
 <div class="content-card">
 <div class="card-header">
 <h3>الإجراءات العاجلة</h3>
 <button class="btn btn-text">عرض الكل</button>
 </div>
 <div class="card-body">
 <div class="action-list" id="pendingActions">
 <!-- Action items will be populated by JavaScript -->
 </div>
 </div>
 </div>
 </div>
 </section>

 <!-- Users Management Page -->
 <section id="users" class="page">
 <div class="page-header">
 <h1 class="page-title">إدارة المستخدمين</h1>
 <div class="page-actions">
 <div class="search-box">
 <input type="text" id="userSearch" placeholder="البحث عن مستخدم...">
 <i class="fas fa-search"></i>
 </div>
 <button class="btn btn-primary" id="exportUsers">
 <i class="fas fa-download"></i>
 تصدير
 </button>
 </div>
 </div>

 <div class="content-card">
 <div class="card-header">
 <h3>قائمة المستخدمين</h3>
 <div class="filters">
 <select id="userFilter">
 <option value="all">جميع المستخدمين</option>
 <option value="customer">العملاء</option>
 <option value="tailor">الخياطين</option>
 <option value="corporate">العملاء المؤسسيون</option>
 </select>
 <select id="statusFilter">
 <option value="all">جميع الحالات</option>
 <option value="active">نشط</option>
 <option value="inactive">غير نشط</option>
 <option value="suspended">موقوف</option>
 </select>
 </div>
 </div>
 <div class="card-body">
 <div class="table-container">
 <table class="data-table" id="usersTable">
 <thead>
 <tr>
 <th>المستخدم</th>
 <th>البريد الإلكتروني</th>
 <th>الدور</th>
 <th>تاريخ التسجيل</th>
 <th>الحالة</th>
 <th>الإجراءات</th>
 </tr>
 </thead>
 <tbody>
 <!-- Users data will be populated by JavaScript -->
 </tbody>
 </table>
 </div>
 <div class="pagination">
 <button class="pagination-btn" id="prevPage">
 <i class="fas fa-chevron-right"></i>
 </button>
 <div class="pagination-numbers">
 <span class="page-number active">1</span>
 <span class="page-number">2</span>
 <span class="page-number">3</span>
 </div>
 <button class="pagination-btn" id="nextPage">
 <i class="fas fa-chevron-left"></i>
 </button>
 </div>
 </div>
 </div>
 </section>

 <!-- Tailor Verification Page -->
 <section id="tailors" class="page">
 <div class="page-header">
 <h1 class="page-title">التحقق من الخياطين</h1>
 <div class="page-actions">
 <div class="search-box">
 <input type="text" id="tailorSearch" placeholder="البحث عن خياط...">
 <i class="fas fa-search"></i>
 </div>
 </div>
 </div>

 <div class="content-card">
 <div class="card-header">
 <h3>طلبات التحقق المعلقة</h3>
 <div class="filters">
 <select id="tailorFilter">
 <option value="all">جميع الطلبات</option>
 <option value="pending">قيد الانتظار</option>
 <option value="approved">مقبولة</option>
 <option value="rejected">مرفوضة</option>
 </select>
 </div>
 </div>
 <div class="card-body">
 <div class="table-container">
 <table class="data-table" id="tailorsTable">
 <thead>
 <tr>
 <th>الخياط</th>
 <th>المستندات</th>
 <th>تاريخ الطلب</th>
 <th>الحالة</th>
 <th>الإجراءات</th>
 </tr>
 </thead>
 <tbody>
 <!-- Tailors data will be populated by JavaScript -->
 </tbody>
 </table>
 </div>
 </div>
 </div>
 </section>

 <!-- Portfolio Review Page -->
 <section id="portfolio" class="page">
 <div class="page-header">
 <h1 class="page-title">مراجعة الصور</h1>
 <div class="page-actions">
 <div class="search-box">
 <input type="text" id="portfolioSearch" placeholder="البحث عن صور...">
 <i class="fas fa-search"></i>
 </div>
 </div>
 </div>

 <div class="content-card">
 <div class="card-header">
 <h3>الصور المعلقة للمراجعة</h3>
 <div class="filters">
 <select id="portfolioFilter">
 <option value="all">جميع الصور</option>
 <option value="pending">قيد المراجعة</option>
 <option value="approved">مقبولة</option>
 <option value="rejected">مرفوضة</option>
 </select>
 </div>
 </div>
 <div class="card-body">
 <div class="image-grid">
 <div class="image-card">
 <img src="https://placehold.co/400x300/e3f2fd/2c5aa0?text=بدلة+رجالية" alt="بدلة رجالية">
 <div class="image-actions">
 <button class="btn btn-success btn-icon" title="موافقة">
 <i class="fas fa-check"></i>
 </button>
 <button class="btn btn-error btn-icon" title="رفض">
 <i class="fas fa-times"></i>
 </button>
 <button class="btn btn-text btn-icon" title="معاينة">
 <i class="fas fa-eye"></i>
 </button>
 </div>
 </div>
 <div class="image-card">
 <img src="https://placehold.co/400x300/e3f2fd/2c5aa0?text=فساتين+سهرة" alt="فساتين سهرة">
 <div class="image-actions">
 <button class="btn btn-success btn-icon" title="موافقة">
 <i class="fas fa-check"></i>
 </button>
 <button class="btn btn-error btn-icon" title="رفض">
 <i class="fas fa-times"></i>
 </button>
 <button class="btn btn-text btn-icon" title="معاينة">
 <i class="fas fa-eye"></i>
 </button>
 </div>
 </div>
 <div class="image-card">
 <img src="https://placehold.co/400x300/e3f2fd/2c5aa0?text=ملابس+أطفال" alt="ملابس أطفال">
 <div class="image-actions">
 <button class="btn btn-success btn-icon" title="موافقة">
 <i class="fas fa-check"></i>
 </button>
 <button class="btn btn-error btn-icon" title="رفض">
 <i class="fas fa-times"></i>
 </button>
 <button class="btn btn-text btn-icon" title="معاينة">
 <i class="fas fa-eye"></i>
 </button>
 </div>
 </div>
 <div class="image-card">
 <img src="https://placehold.co/400x300/e3f2fd/2c5aa0?text=تعديلات+ملابس" alt="تعديلات ملابس">
 <div class="image-actions">
 <button class="btn btn-success btn-icon" title="موافقة">
 <i class="fas fa-check"></i>
 </button>
 <button class="btn btn-error btn-icon" title="رفض">
 <i class="fas fa-times"></i>
 </button>
 <button class="btn btn-text btn-icon" title="معاينة">
 <i class="fas fa-eye"></i>
 </button>
 </div>
 </div>
 </div>
 </div>
 </div>
 </section>

 <!-- rest omitted for brevity in file creation -->
 </main>

 <!-- Modals -->
 <div class="modal" id="imageModal">
 <div class="modal-content">
 <div class="modal-header">
 <h3>معاينة الصورة</h3>
 <button class="close-modal">&times;</button>
 </div>
 <div class="modal-body">
 <img id="modalImage" src="" alt="معاينة الصورة">
 </div>
 <div class="modal-footer">
 <button class="btn btn-secondary" id="closeImageModal">إغلاق</button>
 </div>
 </div>
 </div>

 <div class="modal" id="actionModal">
 <div class="modal-content">
 <div class="modal-header">
 <h3 id="actionModalTitle">تنفيذ الإجراء</h3>
 <button class="close-modal">&times;</button>
 </div>
 <div class="modal-body">
 <p id="actionModalMessage">هل أنت متأكد من تنفيذ هذا الإجراء؟</p>
 <div class="form-group" id="actionModalForm" style="display: none;">
 <label for="adminNotes">ملاحظات المسؤول:</label>
 <textarea id="adminNotes" rows="4" placeholder="أضف ملاحظاتك هنا..."></textarea>
 </div>
 </div>
 <div class="modal-footer">
 <button class="btn btn-secondary" id="cancelAction">إلغاء</button>
 <button class="btn btn-primary" id="confirmAction">تأكيد</button>
 </div>
 </div>
 </div>

 <div class="toast-container" id="toastContainer"></div>

 <script>
 // client-side JS (kept minimal here) - actual app uses server API calls
 function getAntiForgeryToken() {
 const inp = document.querySelector('input[name="__RequestVerificationToken"]');
 return inp ? inp.value : null;
 }

 async function fetchWithCsrf(url, opts = {}) {
 opts.credentials = opts.credentials || 'same-origin';
 opts.headers = opts.headers || {};
 if ((opts.method || 'GET').toUpperCase() !== 'GET') {
 const token = getAntiForgeryToken();
 if (token) opts.headers['RequestVerificationToken'] = token;
 }
 return fetch(url, opts);
 }

 // small initialization to show styling
 document.addEventListener('DOMContentLoaded', function() {
 // nothing heavy here - real app populates data via APIs
 });
 </script>
</body>
</html>
