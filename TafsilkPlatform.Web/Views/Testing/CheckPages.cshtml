@{
    ViewData["Title"] = "ÙØ­Øµ Ø§Ù„ØµÙØ­Ø§Øª | Page Checker";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var pages = ViewBag.Pages as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
}

@section Styles {
    <style>
        .page-checker {
         padding: 40px 0;
  background: #f5f7fa;
 min-height: 100vh;
      }

        .checker-header {
       background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
   color: white;
     padding: 50px 0;
  text-align: center;
    margin-bottom: 40px;
        }

   .checker-header h1 {
            font-size: 2.5rem;
  margin-bottom: 10px;
    }

     .progress-section {
  background: white;
        border-radius: 12px;
    padding: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
   margin-bottom: 30px;
        }

  .progress-bar-container {
       background: #e0e0e0;
  height: 40px;
    border-radius: 20px;
     overflow: hidden;
position: relative;
   margin: 20px 0;
    }

        .progress-bar {
 background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
  height: 100%;
 display: flex;
   align-items: center;
       justify-content: center;
    color: white;
      font-weight: 700;
   transition: width 1s ease-out;
        }

        .pages-grid {
     display: grid;
   gap: 15px;
        }

 .page-row {
       background: white;
      padding: 20px;
   border-radius: 12px;
            display: flex;
     justify-content: space-between;
   align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: all 0.3s;
   border-right: 4px solid #27ae60;
   }

        .page-row:hover {
       transform: translateX(-5px);
       box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .page-info {
      flex: 1;
        }

    .page-name {
font-size: 1.2rem;
      font-weight: 600;
      color: #2c3e50;
  margin-bottom: 5px;
      }

        .page-route {
            color: #7f8c8d;
        font-family: monospace;
  font-size: 0.9rem;
   }

.page-status {
     font-size: 2rem;
     margin: 0 20px;
        }

     .page-actions {
       display: flex;
            gap: 10px;
        }

     .test-button {
   padding: 10px 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
            border: none;
       border-radius: 8px;
     text-decoration: none;
         display: inline-flex;
  align-items: center;
   gap: 8px;
     font-weight: 600;
     transition: transform 0.2s;
  }

   .test-button:hover {
    transform: scale(1.05);
    color: white;
        }

   .stats-summary {
 display: grid;
       grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
 gap: 20px;
   margin-bottom: 30px;
        }

        .stat-box {
       background: white;
  padding: 25px;
  border-radius: 12px;
       box-shadow: 0 2px 10px rgba(0,0,0,0.1);
       text-align: center;
        }

  .stat-icon {
  font-size: 3rem;
     margin-bottom: 10px;
        }

        .stat-value {
     font-size: 2.5rem;
   font-weight: 700;
    color: #667eea;
}

    .stat-label {
  color: #7f8c8d;
  margin-top: 5px;
     }

.filter-section {
 background: white;
         padding: 20px;
  border-radius: 12px;
       margin-bottom: 30px;
   box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }

        .filter-buttons {
  display: flex;
            gap: 10px;
    flex-wrap: wrap;
   }

     .filter-button {
       padding: 10px 20px;
    border: 2px solid #667eea;
            background: white;
       color: #667eea;
        border-radius: 8px;
  cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
        }

  .filter-button.active {
    background: #667eea;
    color: white;
    }

   .filter-button:hover {
  background: #667eea;
      color: white;
  }
    </style>
}

<div class="page-checker">
    <div class="checker-header">
  <div class="container">
       <h1>âœ… ÙØ­Øµ Ø§Ù„ØµÙØ­Ø§Øª</h1>
            <p>Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ ØµÙØ­Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</p>
        </div>
    </div>

    <div class="container">
   <!-- Progress Section -->
  <div class="progress-section">
        <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">
     <i class="fas fa-chart-line"></i> Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
   </h3>
         <div class="progress-bar-container">
     <div class="progress-bar" style="width: 100%;">
 100% - Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª Ø¬Ø§Ù‡Ø²Ø©
      </div>
  </div>
     </div>

<!-- Stats Summary -->
<div class="stats-summary">
      <div class="stat-box">
      <div class="stat-icon">ğŸ“„</div>
  <div class="stat-value">@pages.Count()</div>
     <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØµÙØ­Ø§Øª</div>
      </div>

 <div class="stat-box">
      <div class="stat-icon">âœ…</div>
       <div class="stat-value">@pages.Count(p => p.Status == "âœ…")</div>
     <div class="stat-label">ØµÙØ­Ø§Øª Ø¬Ø§Ù‡Ø²Ø©</div>
       </div>

   <div class="stat-box">
 <div class="stat-icon">ğŸ¨</div>
    <div class="stat-value">100%</div>
<div class="stat-label">Ø§Ù„ØªØµÙ…ÙŠÙ…</div>
     </div>

   <div class="stat-box">
     <div class="stat-icon">ğŸ”§</div>
<div class="stat-value">100%</div>
   <div class="stat-label">Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</div>
     </div>
 </div>

  <!-- Filter Section -->
   <div class="filter-section">
      <h4 style="margin-bottom: 15px; color: #2c3e50;">
 <i class="fas fa-filter"></i> ØªØµÙÙŠØ© Ø§Ù„ØµÙØ­Ø§Øª
       </h4>
   <div class="filter-buttons">
        <button class="filter-button active" data-filter="all">
       <i class="fas fa-list"></i> Ø§Ù„ÙƒÙ„ (@pages.Count())
    </button>
     <button class="filter-button" data-filter="customer">
  <i class="fas fa-user"></i> ØµÙØ­Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ (8)
    </button>
       <button class="filter-button" data-filter="tailor">
      <i class="fas fa-cut"></i> ØµÙØ­Ø§Øª Ø§Ù„Ø®ÙŠØ§Ø· (8)
        </button>
 <button class="filter-button" data-filter="admin">
    <i class="fas fa-shield-alt"></i> ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù (5)
     </button>
       </div>
        </div>

  <!-- Pages List -->
<div class="pages-grid" id="pagesGrid">
    @foreach (var pageItem in pages)
   {
   string category = "other";
  if (pageItem.Route.Contains("Account") || pageItem.Route.Contains("profile/customer") || pageItem.Route.Contains("tailors") || pageItem.Route.Contains("Orders/My") || pageItem.Route.Contains("Reviews"))
  {
      category = "customer";
        }
   else if (pageItem.Route.Contains("Tailor") || pageItem.Route.Contains("Orders/TailorOrders") || pageItem.Route.Contains("profile/tailor"))
{
 category = "tailor";
    }
        else if (pageItem.Route.Contains("Admin"))
        {
        category = "admin";
   }

   <div class="page-row" data-category="@category">
  <div class="page-info">
   <div class="page-name">@pageItem.Name</div>
       <div class="page-route">@pageItem.Route</div>
    </div>
   <div class="page-status">@pageItem.Status</div>
 <div class="page-actions">
    @if (!pageItem.Route.Contains("{id}") && !pageItem.Route.Contains("{orderId}"))
 {
 <a href="@pageItem.Route" class="test-button" target="_blank">
   <i class="fas fa-external-link-alt"></i>
   <span>Ø§Ø®ØªØ¨Ø§Ø±</span>
    </a>
    }
 else
  {
    <span style="color: #7f8c8d; font-size: 0.9rem;">ÙŠØªØ·Ù„Ø¨ Ù…Ø¹Ø§Ù…Ù„</span>
      }
   </div>
       </div>
   }
  </div>

<!-- Back Button -->
  <div style="text-align: center; margin-top: 40px;">
       <a href="@Url.Action("Index", "Testing")" class="test-button">
       <i class="fas fa-arrow-right"></i>
<span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù…Ø±ÙƒØ² Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span>
      </a>
    </div>
    </div>
</div>

@section Scripts {
    <script>
  document.addEventListener('DOMContentLoaded', function() {
 // Filter functionality
     const filterButtons = document.querySelectorAll('.filter-button');
            const pageRows = document.querySelectorAll('.page-row');

   filterButtons.forEach(button => {
     button.addEventListener('click', function() {
       // Update active state
  filterButtons.forEach(btn => btn.classList.remove('active'));
    this.classList.add('active');

  const filter = this.dataset.filter;

       // Filter pages
      pageRows.forEach(row => {
    if (filter === 'all') {
row.style.display = 'flex';
     } else {
         const category = row.dataset.category;
       row.style.display = category === filter ? 'flex' : 'none';
    }
     });
     });
            });

// Animate progress bar
  const progressBar = document.querySelector('.progress-bar');
       progressBar.style.width = '0%';
   setTimeout(() => {
     progressBar.style.width = '100%';
  }, 100);

      // Track tested pages
       document.querySelectorAll('.test-button').forEach(button => {
    button.addEventListener('click', function() {
       const pageName = this.closest('.page-row').querySelector('.page-name').textContent;
   console.log('Testing page:', pageName);
       });
});
        });
    </script>
}
