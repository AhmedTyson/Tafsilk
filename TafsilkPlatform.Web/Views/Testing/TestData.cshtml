@{
    ViewData["Title"] = "بيانات الاختبار | Test Data";
  Layout = "~/Views/Shared/_Layout.cshtml";
    var stats = ViewBag.Stats;
  var sampleCustomers = ViewBag.SampleCustomers as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
  var sampleTailors = ViewBag.SampleTailors as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
}

@section Styles {
    <style>
        .test-data-page {
            padding: 40px 0;
            background: #f5f7fa;
         min-height: 100vh;
        }

        .page-header {
         background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
       color: white;
            padding: 40px 0;
            margin-bottom: 40px;
    border-radius: 0 0 20px 20px;
        }

        .stats-overview {
            display: grid;
       grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
       gap: 20px;
     margin-bottom: 40px;
        }

        .stat-box {
    background: white;
    padding: 25px;
        border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
     text-align: center;
            transition: transform 0.3s;
   }

   .stat-box:hover {
   transform: translateY(-5px);
        }

  .stat-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
}

     .stat-value {
       font-size: 2.5rem;
         font-weight: 700;
   color: #667eea;
          margin-bottom: 5px;
        }

        .stat-label {
      color: #7f8c8d;
font-size: 0.95rem;
        }

        .data-table {
   background: white;
        border-radius: 12px;
     padding: 30px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

     .table-header {
 display: flex;
         justify-content: space-between;
            align-items: center;
      margin-bottom: 20px;
            padding-bottom: 15px;
        border-bottom: 2px solid #e0e0e0;
        }

        .table-title {
    font-size: 1.5rem;
         font-weight: 700;
      color: #2c3e50;
        }

        table {
     width: 100%;
       border-collapse: collapse;
        }

        th {
 background: #f8f9fa;
         padding: 15px;
            text-align: right;
font-weight: 600;
            color: #2c3e50;
  border-bottom: 2px solid #e0e0e0;
   }

    td {
        padding: 15px;
          border-bottom: 1px solid #f0f0f0;
      }

 tr:hover {
         background: #f8f9fa;
        }

        .badge {
         padding: 5px 12px;
       border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
     }

     .badge-success {
            background: #d4edda;
            color: #155724;
      }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
   }

        .badge-info {
            background: #d1ecf1;
     color: #0c5460;
        }

        .action-buttons {
            display: flex;
     gap: 10px;
       margin-top: 20px;
}

        .btn {
       padding: 12px 25px;
  border: none;
         border-radius: 8px;
       font-weight: 600;
      cursor: pointer;
            transition: transform 0.2s;
  text-decoration: none;
            display: inline-flex;
       align-items: center;
    gap: 8px;
     }

        .btn:hover {
      transform: translateY(-2px);
        }

   .btn-primary {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
   background: #6c757d;
       color: white;
        }

    .info-card {
  background: #e8f4f8;
  border-right: 4px solid #3498db;
      padding: 20px;
    border-radius: 8px;
      margin-bottom: 30px;
      }

        .info-card h4 {
color: #2c3e50;
            margin-bottom: 10px;
        }

   .info-card ul {
          margin: 10px 0 0 25px;
            color: #555;
      }
    </style>
}

<div class="test-data-page">
    <div class="page-header">
        <div class="container">
     <h1><i class="fas fa-database"></i> بيانات الاختبار</h1>
  <p>نظرة عامة على جميع البيانات في قاعدة البيانات</p>
        </div>
    </div>

    <div class="container">
      <!-- Info Card -->
        <div class="info-card">
<h4><i class="fas fa-info-circle"></i> ملاحظة</h4>
       <ul>
    <li>هذه الصفحة تعرض بيانات حقيقية من قاعدة البيانات</li>
         <li>يمكنك استخدام هذه البيانات للاختبار</li>
      <li>تأكد من وجود بيانات تجريبية قبل البدء بالاختبار</li>
       </ul>
        </div>

        <!-- Statistics Overview -->
      <div class="stats-overview">
            <div class="stat-box">
      <div class="stat-icon">
   <i class="fas fa-users"></i>
        </div>
     <div class="stat-value">@stats.TotalUsers</div>
                <div class="stat-label">إجمالي المستخدمين</div>
       </div>

            <div class="stat-box">
   <div class="stat-icon">
           <i class="fas fa-user"></i>
           </div>
    <div class="stat-value">@stats.Customers</div>
      <div class="stat-label">العملاء</div>
</div>

            <div class="stat-box">
            <div class="stat-icon">
          <i class="fas fa-cut"></i>
       </div>
   <div class="stat-value">@stats.Tailors</div>
           <div class="stat-label">الخياطين</div>
            </div>

            <div class="stat-box">
          <div class="stat-icon">
   <i class="fas fa-check-circle"></i>
  </div>
         <div class="stat-value">@stats.VerifiedTailors</div>
    <div class="stat-label">خياطين موثقين</div>
            </div>

            <div class="stat-box">
             <div class="stat-icon">
           <i class="fas fa-clock"></i>
        </div>
     <div class="stat-value">@stats.PendingVerifications</div>
     <div class="stat-label">طلبات التحقق المعلقة</div>
            </div>

            <div class="stat-box">
      <div class="stat-icon">
    <i class="fas fa-shopping-cart"></i>
  </div>
         <div class="stat-value">@stats.TotalOrders</div>
        <div class="stat-label">إجمالي الطلبات</div>
            </div>

            <div class="stat-box">
   <div class="stat-icon">
       <i class="fas fa-hourglass-half"></i>
          </div>
 <div class="stat-value">@stats.PendingOrders</div>
        <div class="stat-label">طلبات معلقة</div>
       </div>

            <div class="stat-box">
  <div class="stat-icon">
      <i class="fas fa-check-double"></i>
    </div>
  <div class="stat-value">@stats.CompletedOrders</div>
       <div class="stat-label">طلبات مكتملة</div>
            </div>

     <div class="stat-box">
       <div class="stat-icon">
             <i class="fas fa-star"></i>
        </div>
    <div class="stat-value">@stats.TotalReviews</div>
      <div class="stat-label">التقييمات</div>
            </div>

          <div class="stat-box">
       <div class="stat-icon">
              <i class="fas fa-bell"></i>
        </div>
   <div class="stat-value">@stats.Notifications</div>
                <div class="stat-label">الإشعارات</div>
         </div>

   <div class="stat-box">
       <div class="stat-icon">
     <i class="fas fa-key"></i>
         </div>
    <div class="stat-value">@stats.IdempotencyKeys</div>
      <div class="stat-label">مفاتيح Idempotency</div>
</div>
  </div>

        <!-- Sample Customers Table -->
        @if (sampleCustomers.Any())
     {
       <div class="data-table">
      <div class="table-header">
              <div class="table-title">
          <i class="fas fa-user"></i> عينة من العملاء
              </div>
     <span class="badge badge-info">أول 5 عملاء</span>
   </div>
             <table>
    <thead>
 <tr>
             <th>البريد الإلكتروني</th>
  <th>الحالة</th>
          <th>تاريخ التسجيل</th>
      </tr>
            </thead>
   <tbody>
   @foreach (var customer in sampleCustomers)
            {
         <tr>
  <td>@customer.Email</td>
       <td>
              @if (customer.IsActive)
              {
        <span class="badge badge-success">نشط</span>
            }
    else
  {
    <span class="badge badge-warning">غير نشط</span>
      }
     </td>
      <td>@customer.CreatedAt.ToString("dd/MM/yyyy")</td>
                 </tr>
  }
     </tbody>
  </table>
    </div>
        }

        <!-- Sample Tailors Table -->
        @if (sampleTailors.Any())
        {
 <div class="data-table">
     <div class="table-header">
        <div class="table-title">
   <i class="fas fa-cut"></i> عينة من الخياطين
        </div>
    <span class="badge badge-info">أول 5 خياطين</span>
           </div>
   <table>
      <thead>
     <tr>
       <th>اسم المحل</th>
     <th>المدينة</th>
         <th>التقييم</th>
  <th>الحالة</th>
              <th>البريد الإلكتروني</th>
    </tr>
       </thead>
     <tbody>
            @foreach (var tailor in sampleTailors)
            {
    <tr>
             <td>@tailor.ShopName</td>
    <td>@tailor.City</td>
      <td>
         <span style="color: #f39c12;">
       @for (int i = 0; i < 5; i++)
 {
           if (i < Math.Floor(tailor.AverageRating))
     {
 <i class="fas fa-star"></i>
       }
   else
             {
             <i class="far fa-star"></i>
      }
    }
            @tailor.AverageRating.ToString("F1")
            </span>
         </td>
         <td>
          @if (tailor.IsVerified)
 {
    <span class="badge badge-success">
          <i class="fas fa-check-circle"></i> موثق
       </span>
        }
           else
       {
 <span class="badge badge-warning">
   <i class="fas fa-clock"></i> معلق
            </span>
          }
    </td>
  <td>@tailor.Email</td>
             </tr>
              }
           </tbody>
        </table>
     </div>
  }

     <!-- Action Buttons -->
        <div class="action-buttons">
    <a href="/Testing/Index" class="btn btn-primary">
         <i class="fas fa-arrow-right"></i> العودة إلى مركز الاختبار
  </a>
<a href="/Testing/Report" class="btn btn-secondary">
    <i class="fas fa-file-alt"></i> تقرير الاختبار
            </a>
        </div>
    </div>
</div>
