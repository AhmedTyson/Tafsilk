@model TafsilkPlatform.Web.ViewModels.TailorManagement.ManageServicesViewModel

@{
 ViewData["Title"] = "إدارة الخدمات";
    Layout = "~/Views/Shared/_Layout.cshtml";
 var breadcrumbs = new List<(string Text, string? Url)>
    {
        ("لوحة التحكم", Url.Action("Tailor", "Dashboards")),
        ("الخدمات", "")
    };
}

@await Html.PartialAsync("_Breadcrumb", breadcrumbs)

<div class="container-fluid tailor-management-container" dir="rtl">
 <!-- Page Header -->
    <div class="page-header">
     <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div>
     <h1 class="page-title">
   <i class="fas fa-concierge-bell"></i>
  إدارة الخدمات
        </h1>
           <p class="page-description">إدارة الخدمات التي تقدمها وأسعارها</p>
        </div>
   <div class="d-flex gap-2 flex-wrap">
    <a asp-action="AddService" class="btn btn-primary">
   <i class="fas fa-plus-circle"></i>
   إضافة خدمة
   </a>
 <a asp-action="ManagePricing" class="btn btn-success">
    <i class="fas fa-dollar-sign"></i>
   إدارة الأسعار
  </a>
       <a asp-controller="Dashboards" asp-action="Tailor" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-right"></i>
     العودة
      </a>
       </div>
   </div>
    </div>

 <!-- Stats Cards -->
    <div class="row g-4 mb-4">
 <div class="col-md-6">
     <div class="stat-card">
         <div class="stat-icon primary">
      <i class="fas fa-list"></i>
      </div>
    <div class="stat-value">@Model.TotalServices</div>
      <div class="stat-label">إجمالي الخدمات</div>
 </div>
        </div>
 <div class="col-md-6">
            <div class="stat-card">
       <div class="stat-icon success">
  <i class="fas fa-money-bill-wave"></i>
        </div>
       <div class="stat-value">@Model.AveragePrice.ToString("N0") ريال</div>
       <div class="stat-label">متوسط السعر</div>
 </div>
  </div>
 </div>

    <!-- Services Table -->
    @if (Model.Services.Any())
    {
      <div class="card">
    <div class="card-header">
         <h5 class="mb-0">
        <i class="fas fa-list-alt"></i>
    قائمة الخدمات
  </h5>
 </div>
 <div class="card-body p-0">
         <div class="table-responsive">
    <table class="table mb-0">
    <thead>
          <tr>
      <th>اسم الخدمة</th>
      <th>الوصف</th>
 <th class="text-center">السعر الأساسي</th>
 <th class="text-center">المدة التقديرية</th>
  <th class="text-center">الإجراءات</th>
      </tr>
    </thead>
         <tbody>
   @foreach (var service in Model.Services)
  {
       <tr>
     <td><strong>@service.ServiceName</strong></td>
      <td><span class="text-muted">@service.Description</span></td>
     <td class="text-center">
         <span class="badge badge-success">@service.BasePrice.ToString("N0") ريال</span>
   </td>
  <td class="text-center">
      <span class="text-muted">
         <i class="fas fa-clock"></i> @service.EstimatedDuration يوم
         </span>
    </td>
   <td class="text-center">
   <div class="d-flex gap-2 justify-content-center">
   <a asp-action="EditService" asp-route-id="@service.Id" 
 class="btn btn-sm btn-outline-primary">
  <i class="fas fa-edit"></i> تعديل
       </a>
  <button type="button" class="btn btn-sm btn-outline-danger" 
    data-bs-toggle="modal" data-bs-target="#deleteModal-@service.Id">
  <i class="fas fa-trash"></i> حذف
     </button>
      </div>
       </td>
     </tr>
      
   <!-- Delete Modal -->
      <div class="modal fade" id="deleteModal-@service.Id" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
         <div class="modal-header">
       <h5 class="modal-title">تأكيد الحذف</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
       </div>
   <div class="modal-body">
 <p>هل أنت متأكد من حذف هذه الخدمة؟</p>
       <p class="text-muted"><strong>@service.ServiceName</strong></p>
          <div class="alert alert-warning">
             <i class="fas fa-exclamation-triangle"></i>
   سيتم إخفاء الخدمة ولن تظهر للعملاء
        </div>
   </div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">إلغاء</button>
          <form asp-action="DeleteService" asp-route-id="@service.Id" method="post" class="d-inline">
   @Html.AntiForgeryToken()
  <button type="submit" class="btn btn-danger">
     <i class="fas fa-trash"></i> حذف
      </button>
   </form>
       </div>
      </div>
   </div>
    </div>
            }
        </tbody>
     </table>
     </div>
  </div>
 </div>
    }
    else
    {
 <div class="empty-state">
      <div class="empty-state-icon">
       <i class="fas fa-concierge-bell"></i>
 </div>
            <h4 class="empty-state-title">لا توجد خدمات مضافة</h4>
    <p class="empty-state-description">ابدأ بإضافة الخدمات التي تقدمها ليتمكن العملاء من طلبها</p>
      <a asp-action="AddService" class="btn btn-primary btn-lg">
    <i class="fas fa-plus-circle"></i>
    إضافة أول خدمة
         </a>
        </div>
    }
</div>
