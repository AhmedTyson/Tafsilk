@model TafsilkPlatform.Models.Models.TailorProfile

@{
    var safeModel = Model != null ? Model : new TafsilkPlatform.Models.Models.TailorProfile();
    ViewData["Title"] = $"Tafsilk â€” {safeModel.ShopName ?? safeModel.FullName}";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
<style>
    :root {
  --primary-color: #2c5aa0;
        --primary-hover: #1e3f73;
     --primary-light: #e3f2fd;
--secondary-color: #f39c12;
        --secondary-hover: #e67e22;
  --success-color: #27ae60;
    --warning-color: #f39c12;
        --error-color: #e74c3c;
        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --text-light: #bdc3c7;
 --text-white: #ffffff;
        --background-white: #ffffff;
        --background-gray: #f8f9fa;
 --background-light: #ecf0f1;
        --border-color: #e1e8ed;
        --dark: #0f172a;

    --font-family: "Cairo", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      --font-size-xs: 0.75rem;
        --font-size-sm: 0.875rem;
--font-size-base: 1rem;
        --font-size-lg: 1.125rem;
        --font-size-xl: 1.25rem;
--font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;

        --spacing-xs: 0.25rem;
        --spacing-sm: 0.5rem;
 --spacing-md: 1rem;
        --spacing-lg: 1.5rem;
 --spacing-xl: 2rem;
        --spacing-2xl: 3rem;
        --spacing-3xl: 4rem;

        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
   --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
       0 4px 6px -4px rgb(0 0 0 / 0.1);

        --radius-sm: 0.25rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-full: 9999px;

   --transition-fast: 0.15s ease-in-out;
      --transition-normal: 0.3s ease-in-out;
   --transition-slow: 0.5s ease-in-out;
      }

      /* Main Container */
      .container {
   max-width: 1200px;
 margin: 0 auto;
     padding: 0 var(--spacing-md);
  width: 100%;
        box-sizing: border-box;
      }

      @@media (min-width: 768px) {
        .container {
          padding: 0 var(--spacing-lg);
        }
      }

      @@media (min-width: 1024px) {
        .container {
          padding: 0 var(--spacing-xl);
        }
      }

      /* Tailor Profile Header */
      .tailor-profile {
        margin: var(--spacing-2xl) 0;
      width: 100%;
   box-sizing: border-box;
      }

 .profile-header {
        background-color: var(--background-white);
border-radius: var(--radius-lg);
     box-shadow: var(--shadow-md);
        overflow: hidden;
        margin-bottom: var(--spacing-2xl);
      }

      .profile-banner {
      height: 200px;
        background: linear-gradient(
  135deg,
   var(--primary-color) 0%,
  var(--primary-hover) 100%
        );
        position: relative;
      }

      .profile-content {
        padding: var(--spacing-2xl);
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-xl);
      }

      @@media (min-width: 768px) {
        .profile-content {
          grid-template-columns: 1fr 2fr;
        }
      }

      .profile-image {
    text-align: center;
      }

      .profile-img {
        width: 200px;
        height: 200px;
      border-radius: 50%;
      object-fit: cover;
        border: 5px solid var(--background-white);
        box-shadow: var(--shadow-lg);
        margin-top: -100px;
        background-color: var(--background-light);
        position: relative;
        z-index: 2;
      }

      .profile-info {
      padding: var(--spacing-md);
    }

      .profile-name {
      font-size: var(--font-size-3xl);
   font-weight: 700;
        margin-bottom: var(--spacing-sm);
        color: var(--text-primary);
      }

 .profile-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-xs);
        background-color: var(--success-color);
        color: var(--text-white);
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--radius-full);
        font-size: var(--font-size-sm);
  font-weight: 600;
     margin-bottom: var(--spacing-md);
    }

   .profile-stats {
        display: flex;
        gap: var(--spacing-xl);
        margin-bottom: var(--spacing-lg);
        flex-wrap: wrap;
      }

    .stat {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .stat-value {
        font-size: var(--font-size-2xl);
    font-weight: 700;
        color: var(--primary-color);
    }

      .stat-label {
        font-size: var(--font-size-sm);
  color: var(--text-secondary);
 }

      .profile-details {
        display: grid;
        grid-template-columns: 1fr;
    gap: var(--spacing-md);
   margin-bottom: var(--spacing-lg);
   }

    @@media (min-width: 480px) {
        .profile-details {
        grid-template-columns: repeat(2, 1fr);
        }
      }

      .detail-item {
        display: flex;
  align-items: center;
        gap: var(--spacing-sm);
      }

      .detail-item i {
        color: var(--primary-color);
    width: 20px;
      }

      .profile-actions {
        display: flex;
        gap: var(--spacing-md);
        flex-wrap: wrap;
        margin-top: var(--spacing-lg);
      }

  .action-buttons {
      display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
      }

      /* Tabs Section */
      .tabs-section {
        margin-bottom: var(--spacing-3xl);
        width: 100%;
        box-sizing: border-box;
      }

      .tabs-container {
        background-color: var(--background-white);
border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
      overflow: hidden;
      }

      .tabs-header {
        display: flex;
 border-bottom: 1px solid var(--border-color);
        overflow-x: auto;
        scrollbar-width: none;
      }

      .tabs-header::-webkit-scrollbar {
        display: none;
      }

      .tab {
   padding: var(--spacing-md) var(--spacing-lg);
        cursor: pointer;
        transition: all var(--transition-fast);
        white-space: nowrap;
        font-weight: 600;
        color: var(--text-secondary);
   border-bottom: 3px solid transparent;
      }

      .tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

    .tab:hover {
        background-color: var(--background-gray);
      }

      .tab-content {
      display: none;
  padding: var(--spacing-xl);
      }

      .tab-content.active {
        display: block;
      }

      .section-title {
   font-size: var(--font-size-2xl);
        font-weight: 700;
   margin-bottom: var(--spacing-lg);
  color: var(--text-primary);
        padding-bottom: var(--spacing-sm);
 border-bottom: 2px solid var(--border-color);
      }

      /* Information Tab */
      .info-grid {
        display: grid;
    grid-template-columns: 1fr;
     gap: var(--spacing-xl);
      }

      @@media (min-width: 768px) {
    .info-grid {
          grid-template-columns: 1fr 1fr;
      }
      }

      .info-card {
        background-color: var(--background-gray);
     border-radius: var(--radius-lg);
 padding: var(--spacing-lg);
      }

.info-card-title {
     font-size: var(--font-size-lg);
  font-weight: 600;
        margin-bottom: var(--spacing-md);
   color: var(--primary-color);
     display: flex;
    align-items: center;
      gap: var(--spacing-sm);
      }

      .info-list {
      list-style: none;
      }

 .info-list li {
        padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
      }

      .info-list li:last-child {
        border-bottom: none;
 }

      .info-label {
     font-weight: 600;
  color: var(--text-primary);
      }

      .info-value {
        color: var(--text-secondary);
  }

      /* Reviews Tab */
      .reviews-summary {
        background-color: var(--background-white);
     border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
 box-shadow: var(--shadow-sm);
    margin-bottom: var(--spacing-xl);
        display: flex;
        flex-direction: column;
  align-items: center;
        text-align: center;
      }

      @@media (min-width: 768px) {
     .reviews-summary {
      flex-direction: row;
        text-align: left;
          align-items: flex-start;
        }
      }

      .rating-overview {
        flex: 1;
        padding: var(--spacing-md);
      }

      .rating-score {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary-color);
        line-height: 1;
        margin-bottom: var(--spacing-sm);
      }

   .rating-stars {
        color: var(--secondary-color);
  font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
      }

  .rating-count {
        color: var(--text-secondary);
        font-size: var(--font-size-sm);
      }

      .rating-bars {
        flex: 2;
        padding: var(--spacing-md);
      }

      .rating-bar {
        display: flex;
        align-items: center;
        margin-bottom: var(--spacing-sm);
      }

    .rating-label {
        width: 80px;
  font-size: var(--font-size-sm);
        color: var(--text-secondary);
      }

      .rating-bar-inner {
        flex: 1;
   height: 8px;
        background-color: var(--background-light);
        border-radius: var(--radius-full);
 overflow: hidden;
        margin: 0 var(--spacing-sm);
      }

      .rating-bar-fill {
        height: 100%;
     background-color: var(--secondary-color);
        border-radius: var(--radius-full);
      }

      .rating-value {
    width: 30px;
     font-size: var(--font-size-sm);
        color: var(--text-secondary);
        text-align: right;
      }

   .reviews-list {
 display: grid;
        grid-template-columns: 1fr;
  gap: var(--spacing-lg);
      }

      @@media (min-width: 768px) {
        .reviews-list {
       grid-template-columns: repeat(2, 1fr);
        }
      }

      .review-card {
        background-color: var(--background-white);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow-sm);
      }

      .review-header {
    display: flex;
 justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-md);
      }

      .reviewer {
        display: flex;
        align-items: center;
gap: var(--spacing-sm);
      }

      .reviewer-avatar {
        width: 40px;
 height: 40px;
        border-radius: 50%;
        object-fit: cover;
        background-color: var(--background-light);
      }

      .reviewer-info h4 {
        font-size: var(--font-size-base);
      font-weight: 600;
        margin-bottom: 2px;
      }

      .reviewer-info p {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
      }

      .review-stars {
        color: var(--secondary-color);
      }

      .review-content {
color: var(--text-primary);
        line-height: 1.6;
      }

 .review-date {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
        margin-top: var(--spacing-sm);
  }

   /* Services Tab */
      .services-grid {
      display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: var(--spacing-md);
      }

      @@media (min-width: 640px) {
 .services-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @@media (min-width: 1024px) {
        .services-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .service-card {
        background-color: var(--background-white);
 border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow-sm);
        transition: all var(--transition-normal);
        text-align: center;
        position: relative;
      }

      .service-card:hover {
   transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .service-icon {
        width: 60px;
        height: 60px;
        background-color: var(--primary-light);
        border-radius: 50%;
   display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto var(--spacing-md);
    color: var(--primary-color);
   font-size: var(--font-size-xl);
      }

      .service-title {
    font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-sm);
      color: var(--text-primary);
      }

      .service-desc {
  color: var(--text-secondary);
        margin-bottom: var(--spacing-md);
   font-size: var(--font-size-sm);
      }

 .service-price {
      font-size: var(--font-size-lg);
        font-weight: 700;
        color: var(--primary-color);
    margin-bottom: var(--spacing-md);
    }

      .service-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: var(--secondary-color);
        color: white;
        padding: 4px 8px;
        border-radius: var(--radius-sm);
        font-size: var(--font-size-xs);
        font-weight: 600;
      }

 /* Portfolio Tab */
  .portfolio-grid {
      display: grid;
    grid-template-columns: repeat(1, 1fr);
        gap: var(--spacing-md);
      }

      @@media (min-width: 640px) {
        .portfolio-grid {
  grid-template-columns: repeat(2, 1fr);
        }
    }

      @@media (min-width: 1024px) {
        .portfolio-grid {
  grid-template-columns: repeat(3, 1fr);
        }
      }

  .portfolio-item {
    border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-sm);
        transition: all var(--transition-normal);
        position: relative;
        aspect-ratio: 1 / 1;
      }

      .portfolio-item:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .portfolio-img {
  width: 100%;
   height: 100%;
        object-fit: cover;
        transition: transform var(--transition-normal);
      }

    .portfolio-item:hover .portfolio-img {
      transform: scale(1.05);
      }

      .portfolio-overlay {
   position: absolute;
        bottom: 0;
        right: 0;
        left: 0;
  background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        color: white;
        padding: var(--spacing-md);
        transform: translateY(100%);
        transition: transform var(--transition-normal);
      }

      .portfolio-item:hover .portfolio-overlay {
        transform: translateY(0);
      }

      .portfolio-title {
   font-size: var(--font-size-lg);
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
      }

      .portfolio-desc {
        font-size: var(--font-size-sm);
        opacity: 0.9;
}

      /* Calendar and Map Section */
      .calendar-map-section {
        margin-bottom: var(--spacing-3xl);
        width: 100%;
        box-sizing: border-box;
      }

      .calendar-map-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-xl);
}

      @@media (min-width: 1024px) {
        .calendar-map-grid {
          grid-template-columns: 1fr 1fr;
        }
  }

      .calendar-card, .map-card {
   background-color: var(--background-white);
        border-radius: var(--radius-lg);
   padding: var(--spacing-xl);
    box-shadow: var(--shadow-sm);
      }

      .map-placeholder {
        height: 400px;
        background-color: var(--background-light);
        border-radius: var(--radius-md);
        display: flex;
    align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        flex-direction: column;
     gap: var(--spacing-md);
      }

      .map-placeholder i {
        font-size: 3rem;
        color: var(--primary-color);
      }

      /* Buttons */
      .btn {
        display: inline-block;
     padding: var(--spacing-sm) var(--spacing-lg);
        border: none;
        border-radius: var(--radius-md);
        font-family: var(--font-family);
   font-size: var(--font-size-base);
        font-weight: 600;
        text-align: center;
        text-decoration: none;
   cursor: pointer;
     transition: all var(--transition-normal);
        line-height: 1.5;
 }

      .btn-primary {
        background-color: var(--primary-color);
        color: var(--text-white);
      }

      .btn-primary:hover,
   .btn-primary:focus {
        background-color: var(--primary-hover);
        color: var(--text-white);
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }

    .btn-outline {
        background-color: transparent;
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
      }

      .btn-outline:hover,
      .btn-outline:focus {
        background-color: var(--primary-color);
        color: var(--text-white);
      }

 .btn-secondary {
        background-color: var(--secondary-color);
        color: var(--text-white);
    }

      .btn-secondary:hover,
      .btn-secondary:focus {
        background-color: var(--secondary-hover);
        color: var(--text-white);
        transform: translateY(-1px);
  box-shadow: var(--shadow-md);
 }

 /* Responsive Adjustments */
      @@media (max-width: 640px) {
        .profile-header {
          margin: 0 calc(-1 * var(--spacing-md));
        }

   .profile-banner {
    height: 150px;
        }

   .profile-img {
          width: 150px;
  height: 150px;
     margin-top: -75px;
 }

        .profile-actions {
          flex-direction: column;
        }

        .action-buttons {
      width: 100%;
        }

     .action-buttons .btn {
       flex: 1;
          text-align: center;
        }
  }
    </style>
}

<!-- Main Content -->
<main class="container">
    <section class="tailor-profile">
        <div class="profile-header">
            <div class="profile-banner"></div>
            <div class="profile-content">
                <div class="profile-image">
                    @if (safeModel.ProfilePictureData != null)
                    {
                        <img src="@Url.Action("GetTailorProfilePicture", "Profiles", new { id = safeModel.Id })"
                             alt="@safeModel.FullName"
                             class="profile-img" />
                    }
                    else
                    {
                        <img src="https://placehold.co/400x400/e3f2fd/2c5aa0?text=Tailor"
                             alt="@safeModel.FullName"
                             class="profile-img" />
                    }
                </div>
                <div class="profile-info">
                    <h1 class="profile-name">@(safeModel.ShopName ?? safeModel.FullName)</h1>
                    @if (safeModel.IsVerified)
                    {
                        <div class="profile-badge">
                            <i class="fas fa-check-circle"></i>
                            <span>Trusted Tailor</span>
                        </div>
                    }

                    <div class="profile-stats">
                        <div class="stat">
                            <div class="stat-value">@safeModel.YearsOfExperience</div>
                            <div class="stat-label">Years Exp.</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">@ViewBag.CompletedOrders</div>
                            <div class="stat-label">Orders</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">@safeModel.AverageRating.ToString("F1")</div>
                            <div class="stat-label">Rating</div>
                        </div>
                    </div>

                    <div class="profile-details">
                        <div class="detail-item">
                            <i class="fas fa-cut"></i>
                            <span>@(safeModel.Specialization ?? "General Tailoring")</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>@(safeModel.City ?? "Riyadh")</span>
                        </div>
                        @if (!string.IsNullOrEmpty(safeModel.Address))
                        {
                            <div class="detail-item">
                                <i class="fas fa-location-arrow"></i>
                                <span>@safeModel.Address</span>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(safeModel.User?.PhoneNumber))
                        {
                            <div class="detail-item">
                                <i class="fas fa-phone"></i>
                                <span dir="ltr">@safeModel.User.PhoneNumber</span>
                            </div>
                        }
                    </div>

                    <div class="profile-actions">
                        <div class="action-buttons">
                            @if (User.IsInRole("Customer"))
                            {
                                <a href="@Url.Action("CreateOrder", "Orders", new { tailorId = safeModel.Id })" class="btn btn-primary">
                                    Request Service
                                </a>
                            }
                            else if (!User.Identity.IsAuthenticated)
                            {
                                <a href="@Url.Action("Login", "Account", new { returnUrl = Url.Action("CreateOrder", "Orders", new { tailorId = safeModel.Id }) })" class="btn btn-primary">
                                    Login to Request
                                </a>
                            }
                            
                            <a href="https://wa.me/@(safeModel.User?.PhoneNumber?.Replace("+", "") ?? "")" target="_blank" class="btn btn-outline">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="tabs-section">
        <div class="tabs-container">
            <div class="tabs-header">
                <div class="tab active" onclick="openTab(event, 'info')">Information</div>
                <div class="tab" onclick="openTab(event, 'services')">Services</div>
                <div class="tab" onclick="openTab(event, 'portfolio')">Portfolio</div>
                <div class="tab" onclick="openTab(event, 'reviews')">Reviews</div>
            </div>

            <!-- Information Tab -->
            <div id="info" class="tab-content active">
                <h2 class="section-title">About the Tailor</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-card-title">
                            <i class="fas fa-info-circle"></i>
                            <span>About</span>
                        </div>
                        <p style="line-height: 1.8; color: var(--text-secondary);">
                            @(safeModel.Bio ?? "No description available.")
                        </p>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            <i class="fas fa-clock"></i>
                            <span>Business Hours & Contact</span>
                        </div>
                        <ul class="info-list">
                            <li>
                                <span class="info-label">Business Hours</span>
                                <span class="info-value">@(safeModel.BusinessHours ?? "9:00 AM - 10:00 PM")</span>
                            </li>
                            <li>
                                <span class="info-label">City</span>
                                <span class="info-value">@safeModel.City</span>
                            </li>
                            <li>
                                <span class="info-label">District</span>
                                <span class="info-value">@(safeModel.District ?? "-")</span>
                            </li>
                            <li>
                                <span class="info-label">Email</span>
                                <span class="info-value">@(safeModel.User?.Email ?? "-")</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Services Tab -->
            <div id="services" class="tab-content">
                <h2 class="section-title">Our Services</h2>
                @if (safeModel.TailorServices != null && safeModel.TailorServices.Any())
                {
                    <div class="services-grid">
                        @foreach (var service in safeModel.TailorServices.Where(s => !s.IsDeleted))
                        {
                            <div class="service-card">
                                <div class="service-icon">
                                    <i class="fas fa-tshirt"></i>
                                </div>
                                <h3 class="service-title">@service.ServiceName</h3>
                                <p class="service-desc">@(service.Description ?? "No description available")</p>
                                <div class="service-price">@service.BasePrice.ToString("N0") SAR</div>
                                <a href="@Url.Action("CreateOrder", "Orders", new { tailorId = safeModel.Id, serviceId = service.TailorServiceId })" class="btn btn-outline btn-sm">Request</a>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="no-data">
                        <i class="fas fa-box-open fa-3x mb-3 text-muted"></i>
                        <p>No services added yet.</p>
                    </div>
                }
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio" class="tab-content">
                <h2 class="section-title">Our Work</h2>
                @if (safeModel.PortfolioImages != null && safeModel.PortfolioImages.Any())
                {
                    <div class="portfolio-grid">
                        @foreach (var image in safeModel.PortfolioImages.Where(p => !p.IsDeleted))
                        {
                            <div class="portfolio-item">
                                @if (image.ImageData != null)
                                {
                                    <img src="@Url.Action("GetPortfolioImage", "Tailors", new { id = image.PortfolioImageId })" 
                                         alt="@image.Title" 
                                         class="portfolio-img" />
                                }
                                <div class="portfolio-overlay">
                                    <h3 class="portfolio-title">@(image.Title ?? "Work Sample")</h3>
                                    @if (image.EstimatedPrice.HasValue)
                                    {
                                        <p class="portfolio-desc">Approx. Price: @image.EstimatedPrice.Value.ToString("N0") SAR</p>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="no-data">
                        <i class="fas fa-images fa-3x mb-3 text-muted"></i>
                        <p>No portfolio images added yet.</p>
                    </div>
                }
            </div>

            <!-- Reviews Tab -->
            <div id="reviews" class="tab-content">
                <h2 class="section-title">Customer Reviews</h2>
                
                <div class="reviews-summary">
                    <div class="rating-overview">
                        <div class="rating-score">@safeModel.AverageRating.ToString("F1")</div>
                        <div class="rating-stars">
                            @for (int i = 0; i < 5; i++)
                            {
                                if (i < Math.Floor(safeModel.AverageRating))
                                {
                                    <i class="fas fa-star"></i>
                                }
                                else if (i < safeModel.AverageRating)
                                {
                                    <i class="fas fa-star-half-alt"></i>
                                }
                                else
                                {
                                    <i class="far fa-star"></i>
                                }
                            }
                        </div>
                        <div class="rating-count">Based on @ViewBag.ReviewCount reviews</div>
                    </div>
                    
                    <div class="rating-bars">
                        <!-- Simplified rating bars for demo -->
                        <div class="rating-bar">
                            <div class="rating-label">5 Stars</div>
                            <div class="rating-bar-inner">
                                <div class="rating-bar-fill" style="width: @(safeModel.AverageRating >= 4.5m ? "80%" : "20%")"></div>
                            </div>
                            <div class="rating-value">@(safeModel.AverageRating >= 4.5m ? "80%" : "20%")</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">4 Stars</div>
                            <div class="rating-bar-inner">
                                <div class="rating-bar-fill" style="width: @(safeModel.AverageRating >= 3.5m && safeModel.AverageRating < 4.5m ? "60%" : "10%")"></div>
                            </div>
                            <div class="rating-value">@(safeModel.AverageRating >= 3.5m && safeModel.AverageRating < 4.5m ? "60%" : "10%")</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">3 Stars</div>
                            <div class="rating-bar-inner">
                                <div class="rating-bar-fill" style="width: 5%"></div>
                            </div>
                            <div class="rating-value">5%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">2 Stars</div>
                            <div class="rating-bar-inner">
                                <div class="rating-bar-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-value">0%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">1 Star</div>
                            <div class="rating-bar-inner">
                                <div class="rating-bar-fill" style="width: 5%"></div>
                            </div>
                            <div class="rating-value">5%</div>
                        </div>
                    </div>
                </div>

                <div class="reviews-list">
                    <!-- Placeholder reviews since we don't have the actual reviews list in the model yet -->
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer">
                                <img src="https://placehold.co/40x40/e3f2fd/2c5aa0?text=A" class="reviewer-avatar" alt="User" />
                                <div class="reviewer-info">
                                    <h4>Ahmed Al-Saud</h4>
                                    <p>Customer</p>
                                </div>
                            </div>
                            <div class="review-date">2 days ago</div>
                        </div>
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Excellent service and high quality work. Highly recommended!</p>
                    </div>
                    
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer">
                                <img src="https://placehold.co/40x40/e3f2fd/2c5aa0?text=M" class="reviewer-avatar" alt="User" />
                                <div class="reviewer-info">
                                    <h4>Mohammed Ali</h4>
                                    <p>Customer</p>
                                </div>
                            </div>
                            <div class="review-date">1 week ago</div>
                        </div>
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <p class="review-content">Good tailoring but took a bit longer than expected.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

@section Scripts {
    <script>
        function openTab(evt, tabName) {
            var i, tabContent, tabLinks;
            
            // Hide all tab content
            tabContent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabContent.length; i++) {
                tabContent[i].style.display = "none";
                tabContent[i].classList.remove("active");
            }
            
            // Remove active class from all tabs
            tabLinks = document.getElementsByClassName("tab");
            for (i = 0; i < tabLinks.length; i++) {
                tabLinks[i].className = tabLinks[i].className.replace(" active", "");
            }
            
            // Show the current tab and add active class to the button
            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.className += " active";
        }
    </script>
}
